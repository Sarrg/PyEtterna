import unittest
import numpy as np
import numpy.testing

from etterna import chart


test_np = np.array([[ 0.   ,  0.098     , 0., 0., 1., 2.],
                    [ 0.75 ,  1.56737576, 0., 0., 0., 3.],
                    [ 0.875,  1.81227172, 0., 1., 2., 0.],
                    [ 1.625,  3.28164748, 0., 0., 3., 0.],
                    [ 1.75 ,  3.52654344, 2., 1., 0., 0.],
                    [ 2.5  ,  4.9959192 , 3., 0., 0., 0.],
                    [ 2.625,  5.24081516, 2., 0., 1., 0.],
                    [ 3.25 ,  6.46529496, 3., 0., 0., 0.],
                    [ 3.5  ,  6.95508688, 1., 1., 0., 2.],
                    [ 4.25 ,  8.42446264, 0., 0., 0., 3.],
                    [ 4.375,  8.6693586 , 0., 1., 2., 0.],
                    [ 5.125, 10.13873436, 0., 0., 3., 0.],
                    [ 5.25 , 10.38363032, 2., 1., 0., 0.],
                    [ 6.   , 11.85300608, 3., 0., 0., 0.],
                    [ 6.125, 12.09790204, 0., 0., 1., 2.],
                    [ 6.375, 12.58769396, 0., 0., 0., 3.],
                    [ 7.   , 13.81217376, 0., 1., 0., 1.],
                    [ 7.25 , 14.30196568, 0., 0., 0., 1.],
                    [ 7.5  , 14.7917576 , 0., 0., 0., 1.],
                    [ 7.75 , 15.28154952, 0., 1., 1., 0.],
                    [ 8.   , 15.77134144, 0., 0., 1., 0.],
                    [ 8.25 , 16.26113336, 0., 0., 1., 0.],
                    [ 8.5  , 16.75092528, 1., 1., 0., 0.],
                    [ 8.75 , 17.2407172 , 0., 1., 0., 1.],
                    [ 9.   , 17.73050912, 0., 1., 0., 0.],
                    [ 9.25 , 18.22030104, 0., 1., 0., 0.],
                    [ 9.5  , 18.71009296, 1., 0., 0., 1.],
                    [ 9.75 , 19.19988488, 1., 0., 0., 0.],
                    [10.   , 19.6896768 , 1., 0., 0., 0.],
                    [10.25 , 20.17946872, 0., 1., 1., 0.],
                    [10.5  , 20.66926064, 0., 0., 1., 1.],
                    [10.75 , 21.15905256, 0., 0., 1., 0.],
                    [11.   , 21.64884448, 0., 0., 1., 0.],
                    [11.25 , 22.1386364 , 0., 1., 0., 1.],
                    [11.5  , 22.62842832, 0., 0., 0., 1.],
                    [11.75 , 23.11822024, 0., 0., 0., 1.],
                    [12.   , 23.60801216, 1., 1., 0., 0.],
                    [12.25 , 24.09780408, 0., 1., 1., 0.],
                    [12.5  , 24.587596  , 0., 1., 0., 0.],
                    [12.75 , 25.07738792, 0., 1., 0., 0.],
                    [13.   , 25.56717984, 0., 0., 1., 1.],
                    [13.25 , 26.05697176, 0., 0., 1., 0.],
                    [13.5  , 26.54676368, 0., 0., 1., 0.],
                    [13.75 , 27.0365556 , 0., 0., 0., 1.],
                    [14.   , 27.52634752, 0., 0., 0., 1.]]
)

class TestChart(unittest.TestCase):
    @classmethod
    def setUp(self):
        self.chart = chart.from_numpy(test_np, {0: 122.501})
        
    def test_numpy(self):
        c_np = self.chart.numpy()
        numpy.testing.assert_array_equal(c_np, test_np)
        
        
unittest.main()